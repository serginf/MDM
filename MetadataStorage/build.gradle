/*
 * This build file was auto generated by running the Gradle 'init' task
 * by 'snadal' at '11/10/16 10:22 AM' with Gradle 2.10
 */

buildscript {
    repositories {
        mavenCentral()
        jcenter()
    }
    dependencies {
        classpath 'com.github.jengelman.gradle.plugins:shadow:2.0.4'
    }
}

plugins {
    id "org.sonarqube" version "2.7"
}
apply plugin: 'idea'
apply plugin: 'java'
apply plugin: 'maven'
apply plugin: 'war'
repositories {
    mavenCentral()
    jcenter()
}


apply plugin: 'com.github.johnrengelman.shadow'

shadowJar {
    zip64 true
    baseName = 'MetadataStorage-0.0.1-SNAPSHOT'
    classifier = null
    version = null
    manifest {
        attributes 'Main-Class': 'eu.supersede.mdm.storage.ApacheMain'

        //For experiments
        //attributes 'Main-Class': 'eu.supersede.mdm.storage.experiments.ExperimentsRunner'
    }
    append 'META-INF/services/org.apache.jena.system.JenaSubsystemLifecycle'
}

sourceCompatibility = '1.8'
targetCompatibility = '1.8'

configurations {
    providedRuntime

    provided
    compile.extendsFrom provided
    compile {
        transitive = true
    }

    //Avoids conflict: SL4J Multiple bindings were found on the class path
    //exclude group: "org.slf4j", module: "slf4j-log4j12"
    // check for updates every build
    //resolutionStrategy.cacheChangingModulesFor 0, 'seconds'
    //resolutionStrategy.cacheDynamicVersionsFor 0, 'seconds'
}

// In this section you declare the dependencies for your production and test code
dependencies {
    // The production code uses the SLF4J logging API at compile time
    compile 'org.slf4j:slf4j-api:1.7.13'
    compile 'org.eclipse.jetty:jetty-server:9.4.5.v20170502'
    compile 'org.eclipse.jetty:jetty-servlet:9.4.5.v20170502'

    // Jersey for the REST APIs
    compile 'org.glassfish.jersey:jersey-bom:2.24.1'
    compile 'org.glassfish.jersey.containers:jersey-container-grizzly2-http:2.24.1'
    compile 'org.glassfish.jersey.media:jersey-media-multipart:2.24.1'
    compile 'javax.ws.rs:javax.ws.rs-api:2.1-m01'
    compile group: 'javax.servlet', name: 'javax.servlet-api', version: '3.1.0'

    compile 'org.glassfish.jersey.core:jersey-server:2.24.1'
    // Jersey core Servlet 3.x implementation
    compile 'org.glassfish.jersey.containers:jersey-container-servlet:2.24.1'

    //compile 'com.google.guava:guava:25.1-jre'
    compile 'com.google.guava:guava:15.0'
    compile 'org.mongodb:mongo-java-driver:3.4.0-rc1'
    compile 'net.minidev:json-smart:2.2.1'
    compile('org.apache.jena:apache-jena-libs:3.1.1') {
        exclude group: 'com.github.jsonld-java'
    }
    compile 'com.google.code.gson:gson:2.8.0'
    /*compile 'org.scala-lang:scala-library:2.12.0'*/
    compile 'org.jgrapht:jgrapht-core:1.2.0'

    compile 'org.apache.curator:curator-framework:2.3.0'
    compile 'org.slf4j:slf4j-api:1.7.6'
    compile 'org.apache.httpcomponents:httpclient:4.5.3'

    //compile 'org.scala-lang:scala-library:2.10.0-M3'

    compile 'org.apache.spark:spark-core_2.11:2.4.3'
    compile 'org.apache.spark:spark-sql_2.11:2.4.3'

    compile group: 'org.postgresql', name: 'postgresql', version: '42.2.6'

    compile files('lib/sqlite4java-392/sqlite4java.jar')

    compile group: 'io.swagger', name: 'swagger-jersey2-jaxrs', version: '1.5.22'
//    Powermock
    testCompile group: 'org.powermock', name: 'powermock-api-mockito2', version: '1.7.4'
    testCompile group: 'org.powermock', name: 'powermock-module-junit4', version: '1.7.4'
    testCompile group: 'org.powermock', name: 'powermock-core', version: '1.7.4'

    //JDBC
    compile group: 'postgresql', name: 'postgresql', version: '9.1-901-1.jdbc4'
    compile group: 'mysql', name: 'mysql-connector-java', version: '5.1.44'


//  BDI dependencies
    // https://mvnrepository.com/artifact/org.semarglproject/semargl-sesame
    compile group: 'org.semarglproject', name: 'semargl-sesame', version: '0.7'
    // https://mvnrepository.com/artifact/com.sun.jersey/jersey-client
    compile group: 'com.sun.jersey', name: 'jersey-client', version: '1.9.1'
    
    compile files('lib/logmap-matcher-3.0.jar')

    compile group: 'com.fasterxml.jackson.module', name: 'jackson-module-scala_2.11', version: '2.9.8'

    // https://mvnrepository.com/artifact/com.opencsv/opencsv
    compile group: 'com.opencsv', name: 'opencsv', version: '4.0'

    // https://mvnrepository.com/artifact/mysql/mysql-connector-java
    compile group: 'mysql', name: 'mysql-connector-java', version: '5.1.6'

    compile files('lib/CoreCover.jar')

}
